(function(b,a){if(typeof module!=="undefined"&&module){module.exports=a();return}b.Dependence=a()}(this||window,function(){function a(){var f=[];function d(n,j,i){var m=document.createElement("script"),l=document.head||document.getElementsByTagName("head")[0]||document.documentElement;function k(){m.onload=m.onreadystatechange=null;if(m.parentNode){m.parentNode.removeChild(m)}m=null}m.async=true;if(j){m.charset=j}m.src=n;m.onload=m.onreadystatechange=function(){if(!m.readyState||/loaded|complete/.test(m.readyState)){k();i&&i(200)}};l.insertBefore(m,l.firstChild)}function h(i,j){if(!i){return b}f.push(j);return b}function e(k){if(!(k instanceof Array)){k=Array.prototype.slice.call(arguments,0)}var j=[];if(f.length>0){Array.prototype.push.apply(j,f);f.length=0}Array.prototype.push.apply(j,k);var i=null;if(j.length>0&&typeof j[j.length-1]==="function"){i=j.pop()}c=c.then(function(){if(i){j=i()}if(j.length==0){return MiniPromise.resolve()}var m=[];for(var l=0;l<j.length;l++){(function(n){m.push(new MiniPromise(function(p,o){d(n,"utf-8",function(){p()})}))})(j[l])}return MiniPromise.all(m)});return b}function g(i){c.then(i)}var c=MiniPromise.resolve();var b={require:e,when:h,then:g};return b}a.require=function(){return a().require.apply(null,arguments)};return a}));